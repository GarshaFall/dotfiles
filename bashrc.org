#+TITLE: Bash Configuration
#+AUTHOR: GarshaFall
#+DATE: {{{date(%Y-%m-%d)}}}

* Bash Configuration

  Enhanced bash configuration with X11 environment variables and utilities.

** Configuration File
   #+BEGIN_SRC bash
   # ~/.bashrc: executed by bash(1) for non-login shells.

   # If not running interactively, don't do anything
   [[ $- != *i* ]] && return

   # ==========================================
   # Theme Settings
   # ==========================================
   THEME=${THEME:-"ROUGE"}

   # ==========================================
   # X11 Environment Variables
   # ==========================================
   export XDG_CONFIG_HOME="$HOME/.config"
   export XDG_DATA_HOME="$HOME/.local/share"
   export XDG_CACHE_HOME="$HOME/.cache"

   # Application defaults
   export BROWSER=firefox
   export TERMINAL=xterm
   export EDITOR=micro
   export VISUAL=micro

   # X11 specific
   export XAUTHORITY="$HOME/.Xauthority"
   export DISPLAY=:0

   # Font rendering improvements
   export FREETYPE_PROPERTIES="truetype:interpreter-version=38"
   export QT_AUTO_SCREEN_SCALE_FACTOR=0
   export GDK_SCALE=1

   # ==========================================
   # Path Additions
   # ==========================================
   export PATH="$HOME/.local/bin:$PATH"
   export PATH="$HOME/bin:/usr/local/bin:$PATH"

   # ==========================================
   # History Settings
   # ==========================================
   export HISTSIZE=10000
   export HISTFILESIZE=20000
   export HISTCONTROL=ignoredups:erasedups
   export HISTIGNORE="&:ls:[bf]g:exit:theme_*"
   shopt -s histappend

   # ==========================================
   # Aliases
   # ==========================================
   alias ls='ls --color=auto'
   alias ll='ls -lah'
   alias grep='grep --color=auto'
   alias vi='vim'
   alias ..='cd ..'
   alias ...='cd ../..'

   # X11 utilities
   alias xreload='xrdb -merge ~/.Xresources'
   alias xres='xrdb -query'
   alias xfonts='fc-list | grep -i "fira"'
   alias xdpi='xdpyinfo | grep -B2 -A2 resolution'

   # Safety aliases
   alias rm='rm -i'
   alias cp='cp -i'
   alias mv='mv -i'

   # ==========================================
   # Theme Switching Aliases
   # ==========================================
   alias theme='theme-switcher'
   alias theme-next='theme-switcher next'
   alias theme-rouge='theme-switcher rouge'
   alias theme-kanagawa='theme-switcher kanagawa'
   alias theme-reload='theme-switcher reload'
   alias theme-current='theme-switcher current'

   # ==========================================
   # X11 Utility Functions
   # ==========================================

   # Reload X resources and restart i3
   xrefresh() {
       xrdb -merge ~/.Xresources
       i3-msg restart
       echo "X resources reloaded and i3 restarted"
   }

   # Get window information
   xwin() {
       echo "Click on a window to get info:"
       xwininfo
   }

   # List available fonts
   xfont() {
       fc-list "$@" | less
   }

   # Screenshot with flameshot
   xshot() {
       if command -v flameshot >/dev/null; then
           flameshot "$@"
       else
           echo "Flameshot not installed. Run: sudo dnf install flameshot"
       fi
   }

   # Display information
   xinfo() {
       echo "=== Display Information ==="
       xdpyinfo | grep -E "(dimensions|resolution)"
       echo -e "\n=== Connected Monitors ==="
       xrandr --query | grep " connected"
       echo -e "\n=== X Resources ==="
       xrdb -query | grep -E "(foreground|background|font)"
   }

   # ==========================================
   # Prompt Configuration
   # ==========================================
   # Rouge theme colors
   ROUGE_USER_COLOR="\[\033[38;5;167m\]"
   ROUGE_HOST_COLOR="\[\033[38;5;95m\]"
   ROUGE_DIR_COLOR="\[\033[38;5;137m\]"
   ROUGE_PROMPT_COLOR="\[\033[38;5;95m\]"
   ROUGE_RESET="\[\033[0m\]"

   # Git status function (simplified)
   git_status_prompt() {
       if git rev-parse --is-inside-work-tree &>/dev/null; then
           local branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
           echo " (${branch})"
       fi
   }

   # Set prompt based on theme
   case "$THEME" in
       "ROUGE")
           PS1="${ROUGE_USER_COLOR}\u@${ROUGE_HOST_COLOR}\h ${ROUGE_DIR_COLOR}\w\$(git_status_prompt)${ROUGE_PROMPT_COLOR}\\\$${ROUGE_RESET} "
           ;;
       "KANAGAWA")
           PS1="${ROUGE_USER_COLOR}\u@${ROUGE_HOST_COLOR}\h ${ROUGE_DIR_COLOR}\w\$(git_status_prompt)${ROUGE_PROMPT_COLOR}\\\$${ROUGE_RESET} "
           ;;
       *)
           PS1="${ROUGE_USER_COLOR}\u@${ROUGE_HOST_COLOR}\h ${ROUGE_DIR_COLOR}\w\$(git_status_prompt)${ROUGE_PROMPT_COLOR}\\\$${ROUGE_RESET} "
           ;;
   esac

   # ==========================================
   # Startup Commands
   # ==========================================
   # Load X resources if in X session
   if [ -n "$DISPLAY" ]; then
       if [ -f ~/.Xresources ]; then
           xrdb -merge ~/.Xresources 2>/dev/null
       fi
   fi

   # Welcome message
   echo -e "\\033[38;5;95mFedora i3 Desktop \\033[0m- Theme: $THEME"
   echo "X11 utilities loaded: xrefresh, xwin, xfont, xshot, xinfo"
   #+END_SRC

** Installation
   #+BEGIN_SRC bash
   # Backup existing bashrc
   cp ~/.bashrc ~/.bashrc.backup

   # Apply new configuration
   cp bashrc-config.txt ~/.bashrc

   # Reload bash configuration
   source ~/.bashrc
   #+END_SRC

** New Features

*** X11 Environment Variables
    - XDG base directories for better organization
    - Application defaults (BROWSER, EDITOR, TERMINAL)
    - Font rendering improvements
    - Display scaling settings

*** X11 Utility Aliases
    - =xreload= : Reload X resources
    - =xres= : Show current X resources
    - =xfonts= : List Fira fonts
    - =xdpi= : Show display DPI information

*** X11 Utility Functions
    - =xrefresh()= : Reload X resources and restart i3
    - =xwin()= : Get window information
    - =xfont()= : Search and list fonts
    - =xshot()= : Take screenshots with flameshot
    - =xinfo()= : Display comprehensive X information

*** Enhanced Prompt
    - Theme-aware colors
    - Git branch information
    - Clean, informative layout

** Usage Examples
   #+BEGIN_SRC bash
   # Reload X configuration
   xrefresh

   # Get window information
   xwin

   # Search for fonts
   xfont "mono"

   # Take screenshot
   xshot gui

   # Display system information
   xinfo
   #+END_SRC
