#+TITLE: i3 Window Manager Configuration
#+AUTHOR: GarshaFall
#+DATE: {{{date(%Y-%m-%d)}}}

* i3 Window Manager Configuration

  Complete i3 configuration with working Emacs keybindings and 4 workspace setup.

** Configuration File
   #+BEGIN_SRC ini
   # i3 configuration file with working Emacs keybindings

   # ==========================================
   # General Settings
   # ==========================================
   set $mod Mod4
   font pango:Fira Mono Nerd Font 10

   # ==========================================
   # Startup Applications
   # ==========================================
   exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
   exec --no-startup-id xrandr -s 1920x1080
   exec --no-startup-id feh --bg-fill ~/Pictures/City1.jpg
   exec --no-startup-id picom
   exec_always --no-startup-id pkill -x polybar; polybar main

   # ==========================================
   # Working Emacs-Style Keybindings
   # ==========================================

   # Basic Navigation (Emacs movement keys) - ✅ CONFIRMED WORKING
   bindsym Control+f focus right
   bindsym Control+b focus left
   bindsym Control+n focus down
   bindsym Control+p focus up

   # Moving windows - ✅ CONFIRMED WORKING
   bindsym Control+x m+f move right
   bindsym Control+x m+b move left  
   bindsym Control+x m+n move down
   bindsym Control+x m+p move up

   # Application Launchers - ✅ CONFIRMED WORKING
   bindsym Control+x Control+t exec xterm
   bindsym Control+x Control+f exec nemo
   bindsym Control+x Control+b exec firefox
   bindsym Control+x Control+e exec emacs
   bindsym Control+x Control+m exec micro
   bindsym Control+x Control+d exec rofi -show drun

   # Window Management Mode - ✅ CONFIRMED WORKING
   bindsym Control+x slash mode "emacs-window"

   # ==========================================
   # Traditional i3 Keybindings (Preserved)
   # ==========================================
   bindsym $mod+Return exec xterm
   bindsym $mod+Alt+q exec "systemctl poweroff"
   bindsym $mod+d exec rofi -show drun
   bindsym $mod+Ctrl+d exec firefox

   bindsym $mod+Shift+q kill

   # change focus
   bindsym $mod+b focus left
   bindsym $mod+n focus down
   bindsym $mod+p focus up
   bindsym $mod+f focus right

   bindsym $mod+Left focus left
   bindsym $mod+Down focus down
   bindsym $mod+Up focus up
   bindsym $mod+Right focus right

   # move focused window
   bindsym $mod+Shift+b move left
   bindsym $mod+Shift+n move down
   bindsym $mod+Shift+p move up
   bindsym $mod+Shift+f move right

   bindsym $mod+Shift+Left move left
   bindsym $mod+Shift+Down move down
   bindsym $mod+Shift+Up move up
   bindsym $mod+Shift+Right move right

   # split in vertical orientation
   bindsym $mod+v split v

   # enter fullscreen mode for the focused container
   bindsym $mod+Alt+f fullscreen toggle

   # change container layout (stacked, tabbed, toggle split)
   bindsym $mod+s layout stacking
   bindsym $mod+t layout tabbed
   bindsym $mod+w layout toggle split

   # ==========================================
   # Gaps
   # ==========================================
   gaps inner 5

   # ==========================================
   # 4 Workspaces with Dot Indicators
   # ==========================================
   set $ws1 "1:○"
   set $ws2 "2:○" 
   set $ws3 "3:○"
   set $ws4 "4:○"

   # switch to workspace
   bindsym $mod+1 workspace number $ws1
   bindsym $mod+2 workspace number $ws2
   bindsym $mod+3 workspace number $ws3
   bindsym $mod+4 workspace number $ws4

   # move focused container to workspace
   bindsym $mod+Shift+1 move container to workspace number $ws1
   bindsym $mod+Shift+2 move container to workspace number $ws2
   bindsym $mod+Shift+3 move container to workspace number $ws3
   bindsym $mod+Shift+4 move container to workspace number $ws4

   # Assign applications to specific workspaces
   assign [class="Firefox"] $ws2
   assign [class="Nemo"] $ws3
   assign [class="Emacs"] $ws4

   workspace_layout tabbed

   # ==========================================
   # Emacs Window Management Mode
   # ==========================================
   mode "emacs-window" {
       # Close window
       bindsym 0 kill
       
       # Fullscreen
       bindsym 1 fullscreen toggle
       
       # Splitting
       bindsym 2 split v
       bindsym 3 split h
       
       # Focus navigation
       bindsym o focus next
       
       # Kill window
       bindsym k kill
       
       # Exit mode
       bindsym Return mode "default"
       bindsym Escape mode "default" 
       bindsym Control+g mode "default"
   }

   # ==========================================
   # Resize Mode
   # ==========================================
   mode "resize" {
       bindsym b resize shrink width 10 px or 10 ppt
       bindsym n resize grow height 10 px or 10 ppt
       bindsym p resize shrink height 10 px or 10 ppt
       bindsym f resize grow width 10 px or 10 ppt

       bindsym Left resize shrink width 10 px or 10 ppt
       bindsym Down resize grow height 10 px or 10 ppt
       bindsym Up resize shrink height 10 px or 10 ppt
       bindsym Right resize grow width 10 px or 10 ppt

       bindsym Return mode "default"
       bindsym Escape mode "default"
       bindsym $mod+r mode "default"
   }

   bindsym $mod+r mode "resize"

   # ==========================================
   # System Controls
   # ==========================================
   bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5%
   bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5%
   bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle

   bindsym XF86MonBrightnessUp exec --no-startup-id brightnessctl set +10%
   bindsym XF86MonBrightnessDown exec --no-startup-id brightnessctl set 10%-

   # ==========================================
   # i3 Management
   # ==========================================
   bindsym $mod+Shift+c reload
   bindsym $mod+Shift+r restart
   bindsym $mod+Shift+e exec "i3-msg exit"

   # ==========================================
   # Include Theme Colors
   # ==========================================
   include ~/.config/i3/colors
   #+END_SRC

** Keybindings Reference

*** CONFIRMED WORKING Emacs Bindings
    | Keybinding       | Action                  | Status |
    |------------------+-------------------------|--------|
    | Ctrl + F         | Focus right             | ✅ Works |
    | Ctrl + B         | Focus left              | ✅ Works |
    | Ctrl + N         | Focus down              | ✅ Works |
    | Ctrl + P         | Focus up                | ✅ Works |
    | Ctrl + X Ctrl + T | Terminal (XTerm)       | ✅ Works |
    | Ctrl + X Ctrl + F | File Manager (Nemo)    | ✅ Works |
    | Ctrl + X Ctrl + B | Web Browser (Firefox)  | ✅ Works |
    | Ctrl + X Ctrl + E | Editor (Emacs)         | ✅ Works |
    | Ctrl + X Ctrl + M | Micro Editor           | ✅ Works |
    | Ctrl + X Ctrl + D | Rofi Application Menu  | ✅ Works |
    | Ctrl + X /       | Enter window mode      | ✅ Works |

*** Emacs Window Mode (after Ctrl+X /)
    | Keybinding | Action               | Status |
    |------------+----------------------|--------|
    | 0          | Close window         | ✅ Works |
    | 1          | Fullscreen toggle    | ✅ Works |
    | 2          | Split vertically     | ✅ Works |
    | 3          | Split horizontally   | ✅ Works |
    | O          | Focus next window    | ✅ Works |
    | K          | Kill window          | ✅ Works |
    | Ctrl + G   | Exit mode            | ✅ Works |

*** Traditional i3 Bindings
    | Keybinding        | Action                    |
    |-------------------+---------------------------|
    | Super + Enter     | Terminal                  |
    | Super + D         | Rofi application launcher |
    | Super + 1-4       | Switch workspace          |
    | Super + Shift + 1-4 | Move window to workspace |
    | Super + Shift + R | Restart i3                |
    | Super + Shift + C | Reload configuration      |

** 4 Workspace Layout

*** Workspace Assignments
    | Workspace | Dot | Purpose              | Auto-assigned Apps |
    |-----------+-----+----------------------+-------------------|
    | 1         | ○   | General & Terminal   | None              |
    | 2         | ○   | Web Browsing         | Firefox           |
    | 3         | ○   | File Management      | Nemo              |
    | 4         | ○   | Development          | Emacs             |

*** Dot Indicator System
    | Dot | State    | Description                    |
    |-----+----------+--------------------------------|
    | ○   | Empty    | Workspace has no windows       |
    | ○   | Occupied | Windows present, not focused   |
    | ●   | Focused  | Currently active workspace     |
    | ◐   | Visible  | Visible on another output      |
    | ◓   | Urgent   | Window requires attention      |

** Installation

   Save as =~/.config/i3/config=:

   #+BEGIN_SRC bash
   # Create directory if it doesn't exist
   mkdir -p ~/.config/i3

   # Copy the configuration
   cp i3-config.txt ~/.config/i3/config

   # Reload i3
   i3-msg reload
   #+END_SRC

** Changes from Previous Version

*** ✅ Fixed Keybindings
    - Removed non-working =Control+a= and =Control+e= (focus parent/child)
    - Removed non-working chorded bindings like =Control+x 0=
    - Replaced with proper mode-based window management

*** ✅ Simplified Workspaces
    - Reduced from 9 to 4 workspaces for better focus
    - Clear purpose assignment for each workspace
    - Auto-application assignment for better workflow

*** ✅ Confirmed Working
    - All Emacs navigation keys tested and working
    - Application launchers confirmed functional
    - Mode-based window management implemented
